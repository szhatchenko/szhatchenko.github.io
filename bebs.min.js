function beReady(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)}function be$(e,t){if("function"==typeof t){var n=document.querySelectorAll(e);return n.forEach(t),n}return(t||document).querySelectorAll(e)}function beGoBack(){if(window.beHistory&&!(window.beHistory.length<1)){var e=null!=document.querySelector("#mainContent #operationBackLink"),t=null!=document.querySelector("#mainContent #queryBackLink"),n=window.beHistory[window.beHistory.length-1];return t?(window.beHistory.pop(),beShowPage((n=window.beHistory.pop()).content),beSaveHistory(n)):e?loadPageWithProgress((n=window.beHistory.pop()).menuLink,n.params):(beShowPage((n=window.beHistory.pop()).content),beSaveHistory(n)),!1}}function beSaveHistory(e){var t=window.beHistory.length>0?window.beHistory[window.beHistory.length-1]:null,n=!t;n||t.aEl==e.aEl&&paramsAreEqual(e.params,t.params)||(n=!0),n&&!e.params.form&&window.beHistory.push(e)}function beFixLinks4Bootstrap(e){e.querySelectorAll("a").forEach(function(e){e.onclick||(e.onclick=function(){return loadPageWithProgress(null,{url:this.href,title:this.innerText,type:"text"},"refreshLink"==this.id),!1})})}function beShowPage(e){var t=document.querySelector("#mainContent");t.innerHTML="";var n=window.addEventListener,r=window.onload,o=[];window.addEventListener=function(e,t,r){"load"===e?o.push(t):n(e,t,r)},console.log("Installed custom addEventListener.");var i=document.createElement("div");i.innerHTML=e;for(var a=i.querySelectorAll("script"),s=i.childNodes,l=0;l<s.length;l++){var c=s[l].cloneNode(!0);if(c.querySelectorAll&&"SCRIPT"!=c.nodeName&&"#text"!=c.nodeName)c.querySelectorAll("a").forEach(function(e){e.onclick||(e.onclick=function(){return loadPageWithProgress(null,{url:this.href,title:this.innerText,type:"text"},"refreshLink"==this.id),!1})});t.appendChild(c)}try{for(l=0;l<a.length;l++){var d=document.createElement("script");d.type=a[l].type||"text/javascript",a[l].hasAttribute("src")&&(d.src=a[l].src),d.innerHTML=a[l].innerHTML,document.head.appendChild(d),document.head.removeChild(d)}}finally{window.addEventListener=n,console.log("Reverted to original addEventListener.")}var u=i.querySelector("#documentTitle"),m=i.querySelector("#documentMobileTitle");u&&(document.title=u.innerText),m&&(document.querySelector("#mobileHeaderTitle").innerText=m.innerText),be$(".goBackLink",t).forEach(function(e){var t=window.beHistory&&window.beHistory.length>0;e.style.display=t?"":"none",e.onclick=beGoBack});window.getEventListeners&&window.getEventListeners(window).load.length;var v=window.onload;if(o.length>0)for(var f=0;f<o.length;f++)o[f].name?console.log("Executing page's listener #"+f+" ["+o[f].name+"]..."):console.log("Executing page's listener #"+f+"..."),o[f]();else!v||r&&r==v||(console.log("Executing page's window.onload..."),window.onload=r||null,v())}function paramsAreEqual(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o in n){var i=n[o];if(e[i]!==t[i])return!1}return!0}function loadPageWithProgress(e,t,n){document.querySelector("#dismiss").classList.contains("active")&&document.querySelector("#dismiss").click();var r=null;if(t.form){var o=t.form;if("formPropertyInspector"==o.id&&validate(o)){(r=new FormData).append(t.execOp,"Execute");for(var i=0;i<o.elements.length;i++){if((s=o.elements[i]).name&&!s.name.startsWith("_internal_")){var a=s.value;"checkbox"==s.type&&(a=String(s.checked)),r.append(s.name,a)}}}else if("rForm"==o.id){(r=new FormData).append(t.execOp,"1");for(i=0;i<o.elements.length;i++){var s;if((s=o.elements[i]).name&&!s.name.startsWith("_op_")){a=s.value;if("checkbox"==s.type){if(!s.checked)continue;a=s.name.startsWith("_rec_")?"1":String(s.checked)}r.append(s.name,a)}}}if(!r)return!1}document.title=t.title,document.querySelector("#mobileHeaderTitle").innerText=t.title,e&&(document.querySelectorAll(".nav-link").forEach(function(e){e.classList.remove("active")}),e.classList.add("active"));var l=document.querySelector("#mainContent");window.beHistory&&!e||(window.beHistory=[]),l.innerHTML='<div class="progress"> <div class="progress-bar progress-bar-striped progress-bar-animated"   role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div> </div>';var c=new XMLHttpRequest;return c.responseType=t.type,c.onprogress=function(e){var t=e.lengthComputable?e.total:2e4,n=Math.round(100*e.loaded/t);n>100&&(n=100);var r=document.querySelector(".progress-bar");r.style.width=n+"%",r.setAttribute("aria-valuenow",n)},c.onloadstart=function(e){},c.onreadystatechange=function(e){var n=document.querySelector(".progress-bar"),r=null;t.static||1!=this.readyState||(r=50),this.readyState,this.readyState,r&&(n.style.width=r+"%",n.setAttribute("aria-valuenow",r))},c.onloadend=function(r){var o=document.querySelector(".progress-bar");if(o.style.width="99%",o.setAttribute("aria-valuenow",99),200==c.status){var i=null;if("blob"==t.type)i='<img class="w-100 img-fluid d-block mx-auto" src="'+URL.createObjectURL(c.response)+'" />';else i=c.response;var a={menuLink:e,params:t,content:i};n&&(a=window.beHistory.pop()),beShowPage(i),a.params.title=document.title,beSaveHistory(a)}else{var s="Ошибка "+c.status+" при загрузке "+c.responseURL;document.querySelector("#mainContent").innerHTML='<div class="alert alert-danger" role="alert">'+s+"</div>"}},r?(c.open("POST",t.url),c.send(r)):(c.open("GET",t.url),c.send()),!0}function initSidebar(){be$("#sidebarCollapse",function(e){e.addEventListener("click",function(){be$(".nav-link",function(e){e.classList.add("disabled")}),be$(".overlay",function(e){e.classList.add("active")}),be$(".sidebar",function(e){e.classList.remove("d-none"),e.classList.add("d-sm-block","col-sm-4","active")}),be$("#dismiss",function(e){e.classList.add("active")}),be$(".nav-link",function(e){e.classList.remove("disabled")})})}),be$("#dismiss, .overlay",function(e){e.addEventListener("click",function(){return be$(".overlay",function(e){e.classList.remove("active")}),be$("#dismiss",function(e){e.classList.remove("active")}),be$(".sidebar",function(e){e.classList.remove("d-sm-block","col-sm-4","active"),e.classList.add("d-none")}),!1})}),be$(".my-collapsible-item",function(e){e.addEventListener("click",function(e){var t=be$(".feather.feather-chevron-down",this),n=be$(".feather.feather-chevron-right",this);t.forEach(function(e){var t=document.createElement("span");t.innerHTML=feather.icons["chevron-right"].toSvg();var n=e.parentNode;n.insertBefore(t.firstChild,e),n.removeChild(e)}),n.forEach(function(e){var t=document.createElement("span");t.innerHTML=feather.icons["chevron-down"].toSvg();var n=e.parentNode;n.insertBefore(t.firstChild,e),n.removeChild(e)})})}),be$("#searchInput",function(e){e.addEventListener("keyup",function(){var e=this.value.toLowerCase();Array.prototype.filter.call(document.querySelectorAll("li.nav-item"),function(t){var n=t.innerText.trim().toLowerCase();t.style.display=n.indexOf(e)>-1?"block":"none",console.log(t.innerText.trim())})})})}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);