function beReady(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)}function be$(e,t){if("function"==typeof t){var n=document.querySelectorAll(e);return n.forEach(t),n}return(t||document).querySelectorAll(e)}function beGoBack(e,t){if(window.beHistory&&!(window.beHistory.length<1)){var n=null!=document.querySelector("#mainContent #operationBackLink"),o=null!=document.querySelector("#mainContent #queryBackLink"),i=window.beHistory[window.beHistory.length-1];return null!=t?(i=window.beHistory[t],window.beHistory=window.beHistory.slice(0,t),beShowPage(i.content,i),beSaveHistoryIfNeeded(i)):o?(window.beHistory.pop(),beShowPage((i=window.beHistory.pop()).content,i),beSaveHistoryIfNeeded(i)):n?((i=window.beHistory.pop()).params.url=i.historyKeyLink,loadPageWithProgress(i.menuLink,i.params)):(beShowPage((i=window.beHistory.pop()).content,i),beSaveHistoryIfNeeded(i)),!1}}function beSaveHistoryIfNeeded(e){if(e.historyKeyLink){delete e.params.url,delete e.params.form,delete e.params.execOp;for(var t=!1,n=0;n<window.beHistory.length;n++){var o=window.beHistory[n];if(o.historyKeyLink==e.historyKeyLink){o.menuLink&&!e.menuLink&&(e.menuLink=o.menuLink),window.beHistory[n]=e,window.beHistory=window.beHistory.slice(0,n+1),t=!0;break}}if(t||window.beHistory.push(e),document.getElementById("breadcrumbContent")){var i="";for(n=0;n<beHistory.length-1;n++){i||(i='<nav aria-label="breadcrumb"><ol class="breadcrumb">'),i+='<li class="breadcrumb-item"><a href="#"                   onclick="return beGoBack(null,'+n+')">'+beHistory[n].params.title+"</a></li>"}i&&(i+='<li class="breadcrumb-item active" aria-current="page">'+e.params.title+"</li>",i+="</ol></nav>"),document.getElementById("breadcrumbContent").innerHTML=i}}}function beFixLinks4Bootstrap(e){if(e){var t=e.querySelectorAll("a");t&&t.forEach(function(e){if(!e.onclick)if(e.classList.contains("beLink")){if(e.target){var t=e.href,n=e.target;return e.href="#",void(e.onclick=function(){return window.open(t,n),!1})}e.onclick=function(){return loadPageWithProgress(null,{url:this.href,title:this.innerText,type:e.classList.contains("beBlobLink")?"blob":"text"},"refreshLink"==this.id),!1}}else e.target||(e.target="_new"+Date.now())})}}function beShowPage(e,t){var n=document.querySelector("#mainContent");n.innerHTML="";var o=window.addEventListener,i=window.onload,r=[];window.addEventListener=function(e,t,n){"load"===e?r.push(t):o(e,t,n)},console.log("Installed custom addEventListener.");var a=document.createElement("div");a.innerHTML=e;var l=null!=a.querySelector("#queryTitleContainer"),s=a.querySelector("#historyKeyLink")?a.querySelector("#historyKeyLink").href:null;s&&(t.historyKeyLink=s);for(var d=a.querySelectorAll("script"),c=a.childNodes,u=0;u<c.length;u++){var p=c[u].cloneNode(!0);p.querySelectorAll&&"SCRIPT"!=p.nodeName&&"#text"!=p.nodeName&&beFixLinks4Bootstrap(p),n.appendChild(p)}try{for(u=0;u<d.length;u++){var m=document.createElement("script");m.type=d[u].type||"text/javascript",d[u].hasAttribute("src")&&(m.src=d[u].src),m.innerHTML=d[u].innerHTML,document.head.appendChild(m),document.head.removeChild(m)}}finally{window.addEventListener=o,console.log("Reverted to original addEventListener.")}var b=a.querySelector("#documentTitle"),y=a.querySelector("#documentMobileTitle");b&&(document.title=b.innerText,t.params.title=document.title),y&&(document.querySelector("#mobileHeaderTitle").innerText=y.innerText),be$(".goBackLink",n).forEach(function(e){var t=window.beHistory&&window.beHistory.length>0;t&&l&&1==window.beHistory.length&&s==window.beHistory[0].historyKeyLink&&(t=!1),e.style.display=t?"":"none",e.onclick=beGoBack});window.getEventListeners&&window.getEventListeners(window).load.length;var f=window.onload;if(r.length>0)for(var v=0;v<r.length;v++){r[v].name?console.log("Executing page's listener #"+v+" ["+r[v].name+"]..."):console.log("Executing page's listener #"+v+"...");try{r[v]()}catch(e){console.log(e)}}else!f||i&&i==f||(console.log("Executing page's window.onload..."),window.onload=i||null,f());var h=document.getElementById("splitterPlaceholder");if(h){var w=new XMLHttpRequest;w.responseType="text",w.onloadend=function(e){if(200==w.status){var t=document.createElement("div");t.innerHTML=w.response;for(var n=t.querySelectorAll("script"),o=t.childNodes,i=0;i<o.length;i++){var r=o[i].cloneNode(!0);h.appendChild(r)}for(i=0;i<n.length;i++){var a=document.createElement("script");a.type=n[i].type||"text/javascript",n[i].hasAttribute("src")&&(a.src=n[i].src),a.innerHTML=n[i].innerHTML;try{document.head.appendChild(a)}catch(e){console.log("Page contains a script causing an error:"),console.log(e)}document.head.removeChild(a)}h.id="splitter"}},w.open("GET",h.getAttribute("paramFrame")),w.send()}return feather.replace(),l}function paramsAreEqual(e,t){var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var i in n){var r=n[i];if(e[r]!==t[r])return!1}return!0}function s2ab(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),o=0;o!=e.length;++o)n[o]=255&e.charCodeAt(o);return t}function loadPageWithProgress(e,t,n){document.querySelector("#dismiss").classList.contains("active")&&document.querySelector("#dismiss").click();var o=null,i=null;if(t.form){var r=t.form;if("formPropertyInspector"==r.id&&t.reload){i=new FormData;for(var a=0;a<r.elements.length;a++){if((s=r.elements[a]).name&&(!s.name.startsWith("_internal_")&&("radio"!=s.type||s.checked)&&!s.classList.contains("goBackLink"))){var l=s.value;"checkbox"==s.type&&(l=String(s.checked)),"_enc_"==s.name&&(l="UTF-8"),"file"==s.type||i.append(s.name,l)}}}else if("formPropertyInspector"==r.id&&validate(r)){o=t.send,(i=new FormData).append(t.execOp,"Execute");for(a=0;a<r.elements.length;a++){if((s=r.elements[a]).name&&(!s.name.startsWith("_internal_")&&("radio"!=s.type||s.checked)&&!s.classList.contains("goBackLink"))){l=s.value;"checkbox"==s.type&&(l=String(s.checked)),"_enc_"==s.name&&(l="UTF-8"),"file"==s.type?i.append(s.name,s.files[0]):i.append(s.name,l)}}}else if("rForm"==r.id){(i=new FormData).append(t.execOp,"1");for(a=0;a<r.elements.length;a++){var s;if((s=r.elements[a]).name&&!s.name.startsWith("_op_")){"_enc_"==s.name&&(l="UTF-8");l=s.value;if("checkbox"==s.type){if(!s.checked)continue;l=s.name.startsWith("_rec_")?"1":String(s.checked)}i.append(s.name,l)}}}if(!i)return!1}var d=new XMLHttpRequest;d.responseType=t.type,d.onprogress=function(e){var t=e.lengthComputable?e.total:2e4,n=Math.round(100*e.loaded/t);n>100&&(n=100),document.querySelectorAll(".progress-bar").forEach(function(e){e.style.width=n+"%",e.setAttribute("aria-valuenow",n)})},d.onloadstart=function(e){var t=d.getResponseHeader("Content-Type");"blob"!=d.responseType&&t&&0!=t.indexOf("text/html")&&(t&&(0==t.indexOf("application/vnd.")||0==t.indexOf("application/msword")||t.indexOf("zip")>0)&&(d.responseType="blob"))},d.onreadystatechange=function(e){var n=null;t.static||1!=this.readyState||(n=50),this.readyState,this.readyState,n&&document.querySelectorAll(".progress-bar").forEach(function(e){e.style.width=n+"%",e.setAttribute("aria-valuenow",n)})},d.onloadend=function(o){document.querySelector(".progress-bar");if(document.querySelectorAll(".progress-bar").forEach(function(e){e.style.width="99%",e.setAttribute("aria-valuenow",99)}),200==d.status){var i=null,r=d.getResponseHeader("Content-Type");if("blob"==d.responseType||r&&0!=r.indexOf("text/html")){console.log("Content-Type: "+r);var a=d.getResponseHeader("Content-Disposition");console.log("Content-Disposition: "+a);var l=null,s=null;if(r&&(0==r.indexOf("application/vnd.")||0==r.indexOf("application/msword")||r.indexOf("zip")>0)){var c,u=null;if("blob"==d.responseType)console.log("Not displayable, blob = true"),(c=new FileReader).readAsDataURL(d.response),c.onload=function(e){u=e.target.result};else console.log("Not displayable, converting text to blob"),(c=new FileReader).readAsDataURL(d.response),c.onload=function(e){u=e.target.result};s='<a id="modalDownloadLink" download="download.bin" href="'+u+'"></a>'}else l=URL.createObjectURL(d.response),s='                       <iframe class="col-12" frameborder="0"                             width="100%" height="'+.87*window.innerHeight+'px"                             src="'+l+'"></iframe>';i='<div class="modal fade" id="viewBlobModal" tabindex="-1" aria-labelledby="viewBlobModalLabel" aria-hidden="true">   <div class="modal-dialog modal-fullscreen">     <div class="modal-content">       <div class="modal-header">         <h5 class="modal-title" id="viewBlobModalLabel">'+t.title+'</h5>         <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>       </div>       <div class="modal-body">         '+s+"      </div>     </div>   </div> </div>",document.querySelector("#viewBlobContent").innerHTML=i,new bootstrap.Modal(document.getElementById("viewBlobModal")).show(),console.log("modalDownloadLink = "+document.getElementById("modalDownloadLink")),document.getElementById("modalDownloadLink")&&document.getElementById("modalDownloadLink").click()}else if(-1!=["logout"].indexOf(t.url))window.location.reload();else{i=d.response;var p={menuLink:e,params:t,content:i};n&&(p=window.beHistory.pop()),beShowPage(i,p),beSaveHistoryIfNeeded(p)}}else{var m="Ошибка "+d.status+" при загрузке "+d.responseURL;document.querySelector("#mainContent").innerHTML='<div class="alert alert-danger" role="alert">'+m+"</div>"}};var c='<span class="align-middle d-none d-xl-block"    style="position: absolute; top: 50%; left: 40%; margin-top: -1.5rem; margin-left: -20%; width: 75%; height: 3rem;"><div class="progress"> <div class="progress-bar progress-bar-striped progress-bar-animated"   role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div> </div></span><span class="align-middle d-none d-lg-block d-xl-none"    style="position: absolute; top: 50%; left: 50%; margin-top: -1.5rem; margin-left: -20%; width: 65%; height: 3rem;"><div class="progress"> <div class="progress-bar progress-bar-striped progress-bar-animated"   role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div> </div></span><div class="spinner-border text-primary d-lg-none d-block"    style="position: absolute; top: 50%; left: 50%; margin-top: -2.5rem; margin-left: -2.5rem; width: 5rem; height: 5rem;"    role="status">      <span class="visually-hidden">Loading...</span></div>',u=document.querySelector("#mainContent");return o?o(t.form,function(){document.title=t.title,document.querySelector("#mobileHeaderTitle").innerText=t.title,e&&(document.querySelectorAll(".nav-link").forEach(function(e){e.classList.remove("active")}),e.classList.add("active")),window.beHistory&&!e||(window.beHistory=[]),"blob"!=t.type&&(u.innerHTML=c),i?(d.open("POST",t.url),d.send(i)):(d.open("GET",t.url),d.send())}):(document.title=t.title,document.querySelector("#mobileHeaderTitle").innerText=t.title,e&&(document.querySelectorAll(".nav-link").forEach(function(e){e.classList.remove("active")}),e.classList.add("active")),window.beHistory&&!e||(window.beHistory=[]),"blob"!=t.type&&(u.innerHTML=c),i?(d.open("POST",t.url),d.send(i)):(d.open("GET",t.url),d.send())),!0}function clickCollapsible(e,t){var n=be$(".feather.feather-chevron-down",e),o=be$(".feather.feather-chevron-right",e);t&&"collapsed"==t&&o&&o.length>0||t&&"shown"==t&&n&&n.length>0||(n.forEach(function(e){var t=document.createElement("span");t.innerHTML=feather.icons["chevron-right"].toSvg();var n=e.parentNode;n.insertBefore(t.firstChild,e),n.removeChild(e)}),o.forEach(function(e){var t=document.createElement("span");t.innerHTML=feather.icons["chevron-down"].toSvg();var n=e.parentNode;n.insertBefore(t.firstChild,e),n.removeChild(e)}))}function initSidebar(){be$("#sidebarCollapse",function(e){e.addEventListener("click",function(){be$(".nav-link",function(e){e.classList.add("disabled")}),be$(".overlay",function(e){e.classList.add("active")}),be$(".sidebar",function(e){e.classList.remove("d-none"),e.classList.add("d-sm-block","col-sm-4","active")}),be$("#dismiss",function(e){e.classList.add("active")}),be$(".nav-link",function(e){e.classList.remove("disabled")})})}),be$("#dismiss, .overlay",function(e){e.addEventListener("click",function(){return be$(".overlay",function(e){e.classList.remove("active")}),be$("#dismiss",function(e){e.classList.remove("active")}),be$(".sidebar",function(e){e.classList.remove("d-sm-block","col-sm-4","active"),e.classList.add("d-none")}),!1})}),be$(".my-collapsible-item",function(e){e.addEventListener("click",function(){clickCollapsible(e)})});var e=[];be$("#searchInput",function(t){t.addEventListener("keyup",function(){0==e.length&&Array.prototype.filter.call(document.querySelectorAll("li.nav-item"),function(t){if(t.classList.contains("my-collapsible-item")){var n=document.querySelector(t.children[0].hash),o=t;e.push({collapsible:o,group:n,show:n.classList.contains("show")})}});var t=this.value.toLowerCase();if(t)Array.prototype.filter.call(document.querySelectorAll("li.nav-item"),function(e){if(e.classList.contains("my-collapsible-item"))e.style.display="none";else{var n=-1!=e.innerText.trim().toLowerCase().indexOf(t);e.style.display=n?"block":"none";var o=e.parentNode;if(n)for(;o&&o.id;){var i=document.getElementById(o.id),r=!1;i.classList.contains("show")||(i.classList.add("show"),r=!0);var a=".nav-link[href='#"+o.id+"']",l=document.querySelector(a);if(l){var s=l.parentNode;s.style.display="block",r&&clickCollapsible(s,"shown"),o=s.parentNode}else o=null}}});else{Array.prototype.filter.call(document.querySelectorAll("li.nav-item"),function(e){e.style.display="block"});for(var n=0;n<e.length;n++){var o=e[n];o.group.classList.contains("show")&&!o.show?(o.group.classList.remove("show"),clickCollapsible(o.collapsible,"collapsed")):!o.group.classList.contains("show")&&o.show&&(o.group.classList.add("show"),clickCollapsible(o.collapsible,"shown"))}e.length=0}})})}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);